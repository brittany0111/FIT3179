{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 800,
  "height": 300,
  "projection": {"type": "mercator"},
  "layer": [
    {
      "data": {
        "graticule": {
          "step": [2, 2],
          "extent": [[99, 1], [120, 8]]
        }
      },
      "mark": {"type": "geoshape", "stroke": "#ccc", "strokeWidth": 0.5}
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/brittany0111/FIT3179/main/malaysia_states.json",
        "format": {
          "type": "topojson",
          "feature": "ne_10m_admin_1_states_provinces"
        }
      },
      "transform": [
        {
          "lookup": "properties.name",
          "from": {
            "data": {
              "url": "https://raw.githubusercontent.com/brittany0111/FIT3179/main/forest_reserve_state_normalized_clean.csv"
            },
            "key": "state",
            "fields": ["forest_area", "total_area", "forest_norm", "date"]
          }
        }
      ],
      "mark": {"type": "geoshape"},
      "encoding": {
        "color": {
          "field": "forest_norm",
          "type": "quantitative",
          "title": "Forest Cover (%)",
          "scale": {"scheme": "purples"}
        },
        "tooltip": [
          {"field": "properties.name", "title": "State"},
          {"field": "forest_norm", "title": "Forest Cover (%)", "format": ".2f"},
          {"field": "forest_area", "title": "Forest Area (ha)", "format": ",.2f"}
        ]
      }
    },
    {
      "data": {
        "values": [
          {
            "x1": 115.3, "y1": 5.8,  
            "x2": 117, "y2": 5.0 
          }
        ]
      },
      "mark": {
        "type": "rule",
        "stroke": "#a482bb",
        "strokeWidth": 2
      },
      "encoding": {
        "longitude": {"field": "x1", "type": "quantitative"},
        "latitude": {"field": "y1", "type": "quantitative"},
        "longitude2": {"field": "x2"},
        "latitude2": {"field": "y2"}
      }
    },
    {
    "data": {
      "values": [{"text": "Sabah","longitude": 110, "latitude": 6.3}]
    },
    "mark": {
      "type": "text",
      "font": "Helvetica Neue",
      "fontWeight": "bold",
      "align": "right",
      "fontSize": 18,
      "fill": "#41085d",
      "radius": 4,
      "dx": 80,
      "dy": -10
    },
    "encoding": {
      "longitude": {"field": "longitude", "type": "quantitative"},
      "latitude": {"field": "latitude", "type": "quantitative"},
      "text": {"field": "text"}
    }
    },
    {
    "data": {
      "values": [{"text": "48.55%","longitude": 110, "latitude": 5.4}]
    },
    "mark": {
      "type": "text",
      "font": "Helvetica Neue",
      "fontWeight": "bold",
      "align": "right",
      "fontSize": 18,
      "fill": "#41085d",
      "radius": 4,
      "dx": 197,
      "dy": -10
    },
    "encoding": {
      "longitude": {"field": "longitude", "type": "quantitative"},
      "latitude": {"field": "latitude", "type": "quantitative"},
      "text": {"field": "text"}
    }
    },
    {
    "data": {
      "values": [
        {"line": "stands out with the", "longitude": 110, "latitude": 6.3},
        {"line": "highest percentage of forest cover", "longitude": 110, "latitude": 5.87},
        {"line": "in Malaysia of ", "longitude": 108, "latitude": 5.4}
      ]
    },
    "mark": {
      "type": "text",
      "font": "Helvetica Neue",
      "align": "right",
      "fontSize": 14,
      "fill": "#3B0A45",
      "radius": 4,
      "dx": 205,
      "dy": -10
    },
    "encoding": {
      "longitude": {"field": "longitude", "type": "quantitative"},
      "latitude": {"field": "latitude", "type": "quantitative"},
      "text": {"field": "line"}
    }
    },


    {
      "data": {
        "values": [
          {
            "x1": 104.2, "y1": 3.7,  
            "x2": 101.7, "y2": 3.14 
          }
        ]
      },
      "mark": {
        "type": "rule",
        "stroke": "#bc81c7",
        "strokeWidth": 2
      },
      "encoding": {
        "longitude": {"field": "x1", "type": "quantitative"},
        "latitude": {"field": "y1", "type": "quantitative"},
        "longitude2": {"field": "x2"},
        "latitude2": {"field": "y2"}
      }
    },
    {
    "data": {
      "values": [{"text": "Kuala Lumpur","longitude": 100, "latitude": 3.05}]
    },
    "mark": {
      "type": "text",
      "font": "Helvetica Neue",
      "fontWeight": "bold",
      "align": "left",
      "fontSize": 18,
      "fill": "#814d8c",
      "radius": 4,
      "dx": 165,
      "dy": -10
    },
    "encoding": {
      "longitude": {"field": "longitude", "type": "quantitative"},
      "latitude": {"field": "latitude", "type": "quantitative"},
      "text": {"field": "text"}
    }
    },
    {
    "data": {
      "values": [{"text": "0.28%","longitude": 103.7, "latitude": 2.55}]
    },
    "mark": {
      "type": "text",
      "font": "Helvetica Neue",
      "fontWeight": "bold",
      "align": "left",
      "fontSize": 18,
      "fill": "#814d8c",
      "radius": 4,
      "dx": 165,
      "dy": -10
    },
    "encoding": {
      "longitude": {"field": "longitude", "type": "quantitative"},
      "latitude": {"field": "latitude", "type": "quantitative"},
      "text": {"field": "text"}
    }
    },
    {
    "data": {
      "values": [
        {"line": "As Malaysia's most urbanized area, ", "longitude": 102, "latitude": 3.3},
        {"line": "shows the", "longitude": 105.3, "latitude": 2.8},
        {"line": "lowest forest cover of", "longitude": 102, "latitude": 2.3}
      ]
    },
    "mark": {
      "type": "text",
      "font": "Helvetica Neue",
      "align": "left",
      "fontSize": 14,
      "fill": "#814d8c",
      "radius": 4,
      "dx": 90,
      "dy": -20
    },
    "encoding": {
      "longitude": {"field": "longitude", "type": "quantitative"},
      "latitude": {"field": "latitude", "type": "quantitative"},
      "text": {"field": "line"}
    }
    }
  ]
}
