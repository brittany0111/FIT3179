{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 800,
  "height": 500,
  "projection": {"type": "mercator"},
  "layer": [
    {
      "data": {
        "graticule": {
          "step": [2, 2],
          "extent": [[99, 1], [120, 8]]
        }
      },
      "mark": {"type": "geoshape", "stroke": "#ccc", "strokeWidth": 0.5}
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/brittany0111/FIT3179/main/malaysia_states.json",
        "format": {
          "type": "topojson",
          "feature": "ne_10m_admin_1_states_provinces"
        }
      },
      "mark": {"type": "geoshape", "fill": "#f5f5f5", "stroke": "#999", "strokeWidth": 0.5}
    },
    {
      "data": {
        "values": [
          {"state": "Johor", "tree_cover_gain": 102271.240799419, "lat": 1.5, "lon": 103.7},
          {"state": "Kedah", "tree_cover_gain": 44640.6565639781, "lat": 6.2, "lon": 100.4},
          {"state": "Kelantan", "tree_cover_gain": 23027.9455378242, "lat": 6.2, "lon": 102.2},
          {"state": "Kuala Lumpur", "tree_cover_gain": 862.618885471748, "lat": 3.14, "lon": 101.69},
          {"state": "Labuan", "tree_cover_gain": 188.307239131397, "lat": 5.29, "lon": 115.24},
          {"state": "Melaka", "tree_cover_gain": 12985.8308518565, "lat": 2.19, "lon": 102.25},
          {"state": "Negeri Sembilan", "tree_cover_gain": 41198.4348071435, "lat": 2.73, "lon": 101.94},
          {"state": "Pahang", "tree_cover_gain": 117174.166308564, "lat": 3.94, "lon": 102.45},
          {"state": "Perak", "tree_cover_gain": 67955.6423327304, "lat": 4.59, "lon": 101.09},
          {"state": "Perlis", "tree_cover_gain": 4735.26157143797, "lat": 6.44, "lon": 100.20},
          {"state": "Pulau Pinang", "tree_cover_gain": 2736.85779220767, "lat": 5.42, "lon": 100.33},
          {"state": "Putrajaya", "tree_cover_gain": 889.748830950691, "lat": 2.93, "lon": 101.70},
          {"state": "Sabah", "tree_cover_gain": 217128.104908621, "lat": 5.99, "lon": 116.08},
          {"state": "Sarawak", "tree_cover_gain": 302061.522171832, "lat": 2.45, "lon": 112.98},
          {"state": "Selangor", "tree_cover_gain": 39703.067000453, "lat": 3.07, "lon": 101.52},
          {"state": "Terengganu", "tree_cover_gain": 29637.9941393731, "lat": 5.31, "lon": 103.14}
        ]
      },
      "mark": {"type": "circle", "opacity": 0.7, "stroke": "black", "strokeWidth": 0.5},
      "encoding": {
        "longitude": {"field": "lon", "type": "quantitative"},
        "latitude": {"field": "lat", "type": "quantitative"},
        "size": {
          "field": "tree_cover_gain",
          "type": "quantitative",
          "scale": {"type": "sqrt", "range": [50, 2500]},
          "legend": {"title": "Tree Cover Gain"}
        },
        "color": {"value": "#2b8cbe"},
        "tooltip": [
          {"field": "state", "title": "State"},
          {"field": "tree_cover_gain", "title": "Tree Cover Gain (ha)", "format": ",.0f"}
        ]
      }
    }
  ]
}
